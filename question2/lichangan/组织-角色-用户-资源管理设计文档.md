# 角色-用户-资源管理设计文档
## 角色(role)-用户(user)-资源(resource) manager
---
## 修改记录
|序号|日期|修改人|主要修改内容|
| :-: | :-: | :-: | :-: |
|1|2018-1-11|李昌安|新建|
|2|2018-1-17|李昌安|删除了多余的字段|
---
### 1、权限格式(power format)
#### 权限补充描述
1.权限操作对象：权限操作的==资源对象== 

2.权限标签：标签命名格式：**[操作范围(\<array>|"all")].[可执行行为].[针对类型(restype)]** 

3.权限描述：简要的文字描述

#### 对应权限的格式
|字段名|字段类型|描述|必要性|
| :-: | :-: | :-: | :-: |
|id|int|表格索引号|必选|
|powerobject|string|权限操作对象|必选|
|powername|string|权限名称|必选|
|powerid|string|权限id|必选|
|powertag|string|权限标签|可选|
|powerdescribe|string|权限描述|可选|
##### 例如：
```json
{
    "powerobject":"fileinfo",
    "powername": "static_visit",
    "powerid": 1,
    "powertag": "all.visit.file",
    "powerdescribe": "静态访问权限"
}
```
---
### 角色
|字段名|字段类型|描述|必要性|
| :-: | :-: | :-: | :-: |
|id|int|表格索引号|必选|
|rolename|string|角色名|必选|
|roleid|string|角色id|必选|
|rolepreid|string|父角色id|可选|
|rolepower|jsonArray|角色拥有权限的资源|可选|

#### 角色字段补充描述
1.角色权限(rolepower)：主要为CRUD和其他类型

#### 例如
```json
{
    "id": 1,
    "rolename": "super_admin",
    "roleid": 2,
    "rolepreid": 1,
    "rolepower": [
        {
            "powerobject": "fileinfo",
            "powername": "static_visit",
            "powerid": 1,
            "powertag": "all.visit.file",
            "powerdescribe": "静态访问权限"
        },
        {
            "powerobject": "history",
            "powername": "update",
            "powerid": 2,
            "powertag": "all.update.file",
            "powerdescribe": "更新历史记录权限"
        }
    ]
}
```

---
### 用户
|字段名|字段类型|描述|必要性|
| :-: | :-: | :-: |:-:|
|id|int|表格索引号|必选|
|username|string|用户名|必选|
|userid|string|用户编号|必选|
|userrole|string array|用户扮演的角色|必选|
|userotherpower|jsonArray|用户除去角色拥有的权限外，还被赋予的其他权限|可选|

#### 角色字段补充描述
1.用户角色(userrole):一个用户可以扮演多个角色,扮演一个角色之后继承角色的所有权限 

2.用户其他权限(userotherpower):一个用户除去扮演的权限外，本身还拥有的其他权限

#### 例如
```json
{
    "id": 1,
    "username": "lichangan",
    "userid": 111,
    "userrole": ["1","2"],
    "userotherpower": [
        {
            "powerobject": "fileinfo",
            "powername": "delete",
            "powerid": 3,
            "powertag": "all.delete.file",
            "powerdescribe": "删除文档信息权限"
        }
    ]
}
```


---
### 资源
|字段名|字段类型|描述|必要性|
| :-: | :-: | :-: |:-:|
|id|int|表格索引号|必选|
|resname|string|资源名|必选|
|resid|string|资源编号|必选|
|restype|string|资源类型|必选|
|resstatu|int|资源状态|可选|
|resdescribe|string|资源描述|可选|
|resattr|string|资源属性| 可选|
|respath|string|系统存放资源的路径|必选|

#### 角色字段补充描述
1.资源类型(restype):资源类型有以下几种：
#### 
- 文件类型(==file==):属于文件类型
- 操作权限(==control==):操作模块，比如菜单、表格
- 数据(==data==):数据

2.资源状态(resstatu)：==1== 为可用，==0== 为不可用 

3.资源属性(resattr)：资源属性是对资源所存在的位置，主要有以下几种：
####
- 静态属性(==static==)：静态文件，比如图片、字体等
- 动态属性(==dynamic==)：一般为比如菜单、数据库数据、代码完成的行为
- 系统属性(==system==)：系统资源，只读

#### 例如
```json
{
    "id": 1,
    "resname": "menu",
	"resid": "menu",
    "restype": "control",
    "resstatu": 1,
    "resdescribe": "菜单管理",
    "resattr": "dynamic",
    "respath": "/menu"
}
```
